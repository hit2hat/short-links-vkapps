{"version":3,"sources":["panels/Home.js","utils/FireEvent.js","panels/LinkInfo.js","panels/Welcome.js","App.js","index.js"],"names":["isValidUrl","string","console","log","URL","_","Home","id","navigator","useState","accessToken","setAccessToken","links","setLinks","loaded","setLoaded","isRequest","setIsRequest","urlForm","setUrlForm","onlyMy","setOnlyMy","error","setError","useEffect","window","is_app_user","goPage","access_token","loadLinks","auth","Promise","resolve","vkConnect","sendPromise","app_id","scope","then","result","catch","token","response","items","finally","deleteLink","key","filter","x","e","JSON","stringify","onRefresh","isFetching","title","state","children","placeholder","value","onChange","length","currentTarget","style","marginTop","size","onClick","link","showLoader","findIndex","timestamp","Math","floor","Date","now","views","hideLoader","addLink","cursor","map","expandable","before","type","background","fill","display","alignItems","marginRight","short_url","access_key","indicator","marginLeft","number","description","url","slice","showModal","paddingBottom","fireEvent","a","document","createElement","href","target","dispatchEvent","MouseEvent","view","bubbles","cancelable","LinkInfo","onClose","header","params","flexDirection","marginBottom","fontSize","margin","padding","color","stretched","send","level","hideModal","toLocaleString","FireEvent","Welcome","theme","centered","textAlign","vertical","App","activePage","modals","activePanel","Sentry","dsn","release","packageJson","version","environment","process","launchParams","location","searchParams","get","indexOf","host","connect","subscribe","detail","data","schemeAttribute","createAttribute","scheme","body","attributes","setNamedItem","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.9bc34899.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport vkConnect from \"@vkontakte/vk-connect\";\n\nimport Panel from \"@vkontakte/vkui/dist/components/Panel/Panel\";\nimport PanelHeader from \"@vkontakte/vkui/dist/components/PanelHeader/PanelHeader\";\nimport Group from \"@vkontakte/vkui/dist/components/Group/Group\";\nimport Avatar from \"@vkontakte/vkui/dist/components/Avatar/Avatar\";\nimport Cell from \"@vkontakte/vkui/dist/components/Cell/Cell\";\nimport List from \"@vkontakte/vkui/dist/components/List/List\";\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\nimport Spinner from \"@vkontakte/vkui/dist/components/Spinner/Spinner\";\nimport PullToRefresh from \"@vkontakte/vkui/dist/components/PullToRefresh/PullToRefresh\";\nimport Placeholder from \"@vkontakte/vkui/dist/components/Placeholder/Placeholder\";\n\nimport FormLayout from \"@vkontakte/vkui/dist/components/FormLayout/FormLayout\";\nimport FormLayoutGroup from \"@vkontakte/vkui/dist/components/FormLayoutGroup/FormLayoutGroup\";\nimport FormStatus from \"@vkontakte/vkui/dist/components/FormStatus/FormStatus\";\nimport Input from \"@vkontakte/vkui/dist/components/Input/Input\";\nimport Checkbox from \"@vkontakte/vkui/dist/components/Checkbox/Checkbox\";\n\nimport Icon24Linked from \"@vkontakte/icons/dist/24/linked\";\nimport Icon24View from '@vkontakte/icons/dist/24/view';\nimport Icon16Lock from \"@vkontakte/icons/dist/16/lock\";\n\nconst smartRound = (number) => {\n\tif (number < 1000) {\n\t\treturn number;\n\t}\n\n\tif (number < 1000000) {\n\t\treturn Math.floor( (number / 1000) * 10 ) / 10 + \"K\";\n\t}\n\n\treturn Math.floor( (number / 1000000) * 10 ) / 10 + \"M\";\n};\n\nconst isValidUrl = (string) => {\n\tconsole.log(\"Checking link\");\n\ttry {\n\t\tnew URL(string);\n\t\tconsole.log(\"Checked: true\");\n\t\treturn true;\n\t} catch (_) {\n\t\tconsole.log(\"Checked: false\");\n\t\treturn false;\n\t}\n};\n\nconst Home = ({ id, navigator }) => {\n\tconst [ accessToken, setAccessToken ] = useState(null);\n\tconst [ links, setLinks ] = useState([]);\n\tconst [ loaded, setLoaded ] = useState(false);\n\tconst [ isRequest, setIsRequest ] = useState(false);\n\n\tconst [ urlForm, setUrlForm ] = useState(\"\");\n\tconst [ onlyMy, setOnlyMy ] = useState(false);\n\tconst [ error, setError ] = useState(null);\n\n\tuseEffect(() => {\n\t\tif (window.is_app_user === false) {\n\t\t\tnavigator.goPage(\"welcome\");\n\t\t} else {\n\t\t\tif (!window.access_token) {\n\t\t\t\tconst auth = () => new Promise((resolve) => {\n\t\t\t\t\tvkConnect.sendPromise(\"VKWebAppGetAuthToken\", {\n\t\t\t\t\t\tapp_id: 7172940,\n\t\t\t\t\t\tscope: \"\"\n\t\t\t\t\t})\n\t\t\t\t\t\t.then((result) => resolve(result.access_token))\n\t\t\t\t\t\t.catch(() => auth());\n\t\t\t\t});\n\n\t\t\t\tauth()\n\t\t\t\t\t.then((token) => {\n\t\t\t\t\t\tsetAccessToken(token);\n\t\t\t\t\t\tloadLinks(token);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetAccessToken(window.access_token);\n\t\t\t\tloadLinks(window.access_token);\n\t\t\t}\n\t\t}\n\t}, []);\n\n\tconst loadLinks = (accessToken) => {\n\t\tsetLoaded(false);\n\t\tvkConnect.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\"method\": \"utils.getLastShortenedLinks\",\n\t\t\t\"params\": {\n\t\t\t\t\"count\": \"50\",\n\t\t\t\t\"v\": \"5.102\",\n\t\t\t\t\"access_token\": accessToken\n\t\t\t}\n\t\t})\n\t\t\t.then((result) => setLinks(result.response.items))\n\t\t\t.finally(() => setLoaded(true));\n\t};\n\n\tconst addLink = (link, onlyMy) => {\n\t\tconsole.log(\"Try to add link \" + link);\n\t\tif (isRequest) return;\n\t\tsetError(null);\n\n\t\tif (link.length === 0) {\n\t\t\tconsole.log(\"Link was small. Exit\");\n\t\t\treturn setError(\"Введите ссылку\");\n\t\t}\n\n\t\tif (!isValidUrl(link)) {\n\t\t\tif (isValidUrl(\"https://\" + link)) {\n\t\t\t\tlink = \"https://\" + link;\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Link is not link :D\");\n\t\t\t\treturn setError(\"Некорретная ссылка\");\n\t\t\t}\n\t\t}\n\n\t\tconsole.log(\"OK. Send request\");\n\t\tsetIsRequest(true);\n\t\tnavigator.showLoader();\n\t\tvkConnect.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\"method\": \"utils.getShortLink\",\n\t\t\t\"params\": {\n\t\t\t\t\"url\": link,\n\t\t\t\t\"private\": onlyMy ? \"1\" : \"0\",\n\t\t\t\t\"v\": \"5.102\",\n\t\t\t\t\"access_token\": accessToken\n\t\t\t}\n\t\t})\n\t\t\t.then((result) => {\n\t\t\t\tconsole.log(\"Request success. Adding...\");\n\t\t\t\tif (links.findIndex((x) => x.key === result.response.key) === -1) {\n\t\t\t\t\tsetLinks([\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...result.response,\n\t\t\t\t\t\t\ttimestamp: Math.floor(Date.now() / 1000),\n\t\t\t\t\t\t\tviews: 0\n\t\t\t\t\t\t},\n\t\t\t\t\t\t...links\n\t\t\t\t\t]);\n\t\t\t\t\tsetUrlForm(\"\");\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(\"List is exist\");\n\t\t\t\t\tsetError(\"Ссылка уже сокращена\");\n\t\t\t\t}\n\t\t\t\tconsole.log(\"Hide loader\");\n\t\t\t\tnavigator.hideLoader();\n\t\t\t\tsetIsRequest(false);\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tconsole.log(\"Request failed\");\n\t\t\t\tsetError(\"Введите корректную ссылку\");\n\t\t\t\tconsole.log(\"Hide loader\");\n\t\t\t\tnavigator.hideLoader();\n\t\t\t\tsetIsRequest(false);\n\t\t\t})\n\t};\n\n\tconst deleteLink = (key) => {\n\t\tvkConnect.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\"method\": \"utils.deleteFromLastShortened\",\n\t\t\t\"params\": {\n\t\t\t\tkey,\n\t\t\t\t\"v\": \"5.102\",\n\t\t\t\t\"access_token\": accessToken\n\t\t\t}\n\t\t})\n\t\t\t.then(() => setLinks(links.filter((x) => x.key !== key)))\n\t\t\t.catch((e) => console.error(JSON.stringify(e)))\n\t};\n\n\treturn (\n\t\t<Panel id={id}>\n\t\t\t<PanelHeader>Короткие ссылки</PanelHeader>\n\n\t\t\t<PullToRefresh onRefresh={() => loadLinks(accessToken)} isFetching={!loaded}>\n\t\t\t\t<Group title=\"Сократить ссылку\">\n\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t<FormLayoutGroup>\n\t\t\t\t\t\t\t{error && <FormStatus\n\t\t\t\t\t\t\t\tstate=\"error\"\n\t\t\t\t\t\t\t\ttitle=\"Ошибка\"\n\t\t\t\t\t\t\t\tchildren={error}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tplaceholder=\"Ваша ссылка\"\n\t\t\t\t\t\t\t\tvalue={urlForm}\n\t\t\t\t\t\t\t\tonChange={(e) => urlForm.length < 255 ? setUrlForm(e.currentTarget.value) : null}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\tstyle={{ marginTop: 10 }}\n\t\t\t\t\t\t\t\tvalue={onlyMy}\n\t\t\t\t\t\t\t\tonChange={() => setOnlyMy(!onlyMy)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tСтатистика видна только мне\n\t\t\t\t\t\t\t</Checkbox>\n\t\t\t\t\t\t</FormLayoutGroup>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"xl\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\taddLink(urlForm, onlyMy);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tstyle={{ cursor: \"pointer\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСократить\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</FormLayout>\n\t\t\t\t</Group>\n\n\t\t\t\t<Group title=\"Мои ссылки\">\n\t\t\t\t\t{loaded ?\n\t\t\t\t\t\tlinks.length > 0\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t\t\t{links.map((link) => (\n\t\t\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\t\t\texpandable\n\t\t\t\t\t\t\t\t\t\t\tkey={link.key}\n\t\t\t\t\t\t\t\t\t\t\tbefore={\n\t\t\t\t\t\t\t\t\t\t\t\t<Avatar type=\"app\" style={{ background: \"var(--accent)\" }} size={40}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon24Linked fill=\"white\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tchildren={\n\t\t\t\t\t\t\t\t\t\t\t\t<span style={{ display: \"flex\", alignItems: \"center\" }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span style={{ marginRight: 3 }}>{link.short_url}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{link.access_key ? <Icon16Lock fill=\"var(--text_secondary)\"/> : null}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tindicator={\n\t\t\t\t\t\t\t\t\t\t\t\t<span style={{ display: \"flex\", alignItems: \"center\" }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon24View fill=\"var(--text_secondary)\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: 3 }}>{smartRound(link.views)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdescription={link.url.slice(0, 28) + (link.url.length > 28 ? \"...\" : \"\")}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => navigator.showModal(\"link-info\", {\n\t\t\t\t\t\t\t\t\t\t\t\tlink,\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteLink\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\t\t\ttitle=\"Список ссылок пуст\"\n\t\t\t\t\t\t\t\t\tchildren=\"Создаваемые ссылки будут появляться в этой секции\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t: <div style={{ paddingBottom: 25 }}><Spinner/></div>}\n\t\t\t\t</Group>\n\t\t\t</PullToRefresh>\n\t\t</Panel>\n\t);\n};\n\nexport default Home;\n","const fireEvent = (link) => {\n\tconst a = document.createElement('a');\n\ta.href = link;\n\ta.target = '_blank';\n\n\ta.dispatchEvent(new window.MouseEvent('click', {\n\t\tview: window,\n\t\tbubbles: true,\n\t\tcancelable: true\n\t}));\n};\n\nexport default fireEvent;","import React from \"react\";\nimport vkConnect from \"@vkontakte/vk-connect\";\nimport FireEvent from \"../utils/FireEvent\";\n\nimport ModalPage from \"@vkontakte/vkui/dist/components/ModalPage/ModalPage\";\nimport Avatar from \"@vkontakte/vkui/dist/components/Avatar/Avatar\";\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport Cell from \"@vkontakte/vkui/dist/components/Cell/Cell\";\nimport List from \"@vkontakte/vkui/dist/components/List/List\";\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\n\nimport Icon24Linked from \"@vkontakte/icons/dist/24/linked\";\nimport Icon24LinkCircle from \"@vkontakte/icons/dist/24/link_circle\";\nimport Icon16Lock from \"@vkontakte/icons/dist/16/lock\";\nimport Icon24Share from \"@vkontakte/icons/dist/24/share\";\nimport Icon24Delete from \"@vkontakte/icons/dist/24/delete\";\n\nconst LinkInfo = ({ id, onClose, header, navigator }) => {\n\tconst link = navigator.params.link || {};\n\tconst deleteLink = navigator.params.deleteLink || null;\n\n\treturn (\n\t\t<ModalPage\n\t\t\tid={id}\n\t\t\tonClose={onClose}\n\t\t\theader={header}\n\t\t>\n\t\t\t<Div style={{ display: \"flex\", alignItems: \"center\", flexDirection: \"column\" }}>\n\t\t\t\t<Avatar\n\t\t\t\t\ttype=\"image\"\n\t\t\t\t\tsize={60}\n\t\t\t\t\tstyle={{ background: \"var(--accent)\" }}\n\t\t\t\t>\n\t\t\t\t\t<Icon24Linked fill=\"white\"/>\n\t\t\t\t</Avatar>\n\t\t\t\t<h1 style={{ marginTop: 10, marginBottom: 0, fontSize: 18, display: \"flex\", alignItems: \"center\" }}>\n\t\t\t\t\t<span style={{ margin: 0, padding: 0, marginRight: 3 }}>{link.key}</span>\n\t\t\t\t\t{link.access_key ? <Icon16Lock fill=\"var(--text_secondary)\"/> : null}\n\t\t\t\t</h1>\n\t\t\t\t<h3\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmarginTop: 5,\n\t\t\t\t\t\tmarginBottom: 0,\n\t\t\t\t\t\tfontSize: 14,\n\t\t\t\t\t\tcolor: \"var(--text_secondary)\"\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{link.short_url}\n\t\t\t\t</h3>\n\t\t\t</Div>\n\n\t\t\t<Div>\n\t\t\t\t<div style={{ display: \"flex\", marginBottom: 25 }}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tbefore={<Icon24Share/>}\n\t\t\t\t\t\tsize=\"l\"\n\t\t\t\t\t\tstretched\n\t\t\t\t\t\tonClick={() => vkConnect.send(\"VKWebAppShare\", {\"link\": link.short_url})}\n\t\t\t\t\t\tstyle={{ cursor: \"pointer\", marginRight: 10 }}\n\t\t\t\t\t>\n\t\t\t\t\t\tПоделиться\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tbefore={<Icon24Delete/>}\n\t\t\t\t\t\tlevel=\"destructive\"\n\t\t\t\t\t\tsize=\"l\"\n\t\t\t\t\t\tstretched\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tdeleteLink(link.key);\n\t\t\t\t\t\t\tnavigator.hideModal();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={{ cursor: \"pointer\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\tУдалить\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<List>\n\t\t\t\t\t<Cell\n\t\t\t\t\t\tchildren=\"Создано\"\n\t\t\t\t\t\tindicator={new Date(link.timestamp * 1000).toLocaleString()}\n\t\t\t\t\t/>\n\t\t\t\t\t<Cell\n\t\t\t\t\t\tchildren=\"Оригинальная ссылка\"\n\t\t\t\t\t\tonClick={() => FireEvent(link.url)}\n\t\t\t\t\t\tindicator={\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tbefore={<Icon24LinkCircle/>}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tОткрыть\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Cell\n\t\t\t\t\t\tchildren=\"Статистика\"\n\t\t\t\t\t\tindicator={!link.access_key ? \"Публичная\" : \"Приватная\"}\n\t\t\t\t\t/>\n\t\t\t\t\t<Cell\n\t\t\t\t\t\tchildren=\"Переходы\"\n\t\t\t\t\t\tindicator={link.views}\n\t\t\t\t\t/>\n\t\t\t\t</List>\n\t\t\t</Div>\n\t\t</ModalPage>\n\t);\n};\n\nexport default LinkInfo;","import React from \"react\";\nimport vkConnect from \"@vkontakte/vk-connect\";\n\nimport Panel from \"@vkontakte/vkui/dist/components/Panel/Panel\";\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\nimport FixedLayout from \"@vkontakte/vkui/dist/components/FixedLayout/FixedLayout\";\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport Avatar from \"@vkontakte/vkui/dist/components/Avatar/Avatar\";\n\nimport Icon24Linked from \"@vkontakte/icons/dist/24/linked\";\n\nconst Welcome = ({ id, navigator }) => (\n\t<Panel id={id} theme=\"white\" centered>\n\t\t<Div style={{ display: \"flex\", flexDirection: \"column\", textAlign: \"center\", alignItems: \"center\" }}>\n\t\t\t<Avatar type=\"app\" size={60} style={{ background: \"var(--accent)\" }}>\n\t\t\t\t<Icon24Linked fill=\"white\"/>\n\t\t\t</Avatar>\n\t\t\t<h1 style={{ marginBottom: 0 }}>Короткие ссылки</h1>\n\t\t\t<p style={{ marginTop: 15, marginBottom: 5 }}>\n\t\t\t\tВ этом сервисе Вы можете сделать из длинной и сложной ссылки простую.\n\t\t\t\tТакие ссылки удобнее использовать в Ваших записях и сообщениях.\n\t\t\t</p>\n\t\t</Div>\n\t\t<FixedLayout vertical=\"bottom\">\n\t\t\t<Div>\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"xl\"\n\t\t\t\t\tstyle={{ cursor: \"pointer\" }}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tvkConnect.sendPromise(\"VKWebAppGetAuthToken\", {\n\t\t\t\t\t\t\tapp_id: 7172940,\n\t\t\t\t\t\t\tscope: \"\"\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\t\twindow.is_app_user = true;\n\t\t\t\t\t\t\t\twindow.access_token = result.access_token;\n\t\t\t\t\t\t\t\tnavigator.goPage(\"main\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tНачать\n\t\t\t\t</Button>\n\t\t\t</Div>\n\t\t</FixedLayout>\n\t</Panel>\n);\n\nexport default Welcome;","import React from \"react\";\nimport { Stack, Page } from \"vkui-navigator/dist\";\n\nimport Home from \"./panels/Home\";\nimport LinkInfo from \"./panels/LinkInfo\";\nimport Welcome from \"./panels/Welcome\";\n\nconst App = () => (\n\t<Stack\n\t\tactivePage=\"main\"\n\t\tmodals={[\n\t\t\t<LinkInfo\n\t\t\t\tid=\"link-info\"\n\t\t\t\ttitle=\"Информация о ссылке\"\n\t\t\t/>\n\t\t]}\n\t>\n\t\t<Page id=\"main\" activePanel=\"home\">\n\t\t\t<Home id=\"home\"/>\n\t\t</Page>\n\t\t<Page id=\"welcome\" activePanel=\"welcome\">\n\t\t\t<Welcome id=\"welcome\"/>\n\t\t</Page>\n\t</Stack>\n);\n\nexport default App;\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport connect from \"@vkontakte/vk-connect\";\nimport * as Sentry from \"@sentry/browser\";\nimport App from \"./App\";\n\nimport packageJson from \"../package.json\";\nimport \"@vkontakte/vkui/dist/vkui.css\";\nimport \"./style.css\";\n\n// Init Sentry\nSentry.init({\n\tdsn: \"https://6c2fd3ebb2d34f2fb50651894a8e6292@sentry.io/1788338\",\n\trelease: packageJson.version,\n\tenvironment: process.env.NODE_ENV\n});\n\n// Prepare app\nconst launchParams = new URL(window.location.href);\n\nSentry.setUser({\n\t\"id\": launchParams.searchParams && launchParams.searchParams.get(\"vk_user_id\"),\n\t\"platform\": launchParams.searchParams && launchParams.searchParams.get(\"vk_platform\")\n});\n\nwindow.is_app_user = [\"localhost:10888\", \"192.168.1.141:10888\"].indexOf(launchParams.host) === -1 ? launchParams.searchParams && launchParams.searchParams.get(\"vk_is_app_user\") === \"1\" : true;\n\n// Init VK Mini App\nconnect.send(\"VKWebAppInit\");\nconnect.subscribe(({ detail: { type, data }}) => {\n\tif (type === \"VKWebAppUpdateConfig\") {\n\t\tconst schemeAttribute = document.createAttribute(\"scheme\");\n\t\tschemeAttribute.value = data.scheme ? data.scheme : \"bright_light\";\n\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t}\n});\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}